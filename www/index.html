<!doctype html>

<html lang="en">
<head>
<!--	<meta http-equiv="refresh" content="0; url=http://skilladda.com" />	-->
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/index.js"></script>
	<script type="text/javascript" src="js/push.js"></script>
</head>
<body>
	<div id="html">
		<div id="loading">
			<img id="loading-image" src="skilladda_logo_black.png" alt="SkillAdda" />
			<div class="error_msg" id="message"></div><br><br>
			<div class="error_log" id="log_msg"></div>
		</div>	
	</div>
	<script type="text/javascript">
		document.addEventListener("deviceready", onDeviceReady, false);

		// device APIs are available
		
		function onDeviceReady() {
			var  networkConnectionType =  navigator.network.connection.type;
         //   alert('Connection Type: ' +  networkConnectionType );
			var element = document.getElementById('message');
			var log = document.getElementById('log_msg');
			element.innerHTML = '';
			if(networkConnectionType=='none'){
				element.innerHTML = 'Please connect to your internet connection and try again!';
			}
			else{
				alert('test');
				element.innerHTML = '<a target="_blank" onClick=goToUrl();>Go to SkillAdda</a>';
			}
			if ( typeof PushNotification.init == 'function' ) { 
				log.innerHTML = 'init present<br>';
			}
			else
			{
				log.innerHTML = 'init not exists<br>';
			}
			var push = PushNotification.init({ "android": {"senderID": "50957485970"},
				 "ios": {"alert": "true", "badge": "true", "sound": "true"}, "windows": {} } );
			push.on('registration', function(data) {
				log.innerHTML = log.innerHTML+"registration:"+data.registrationId;
				// data.registrationId
			});
			push.on('notification', function(data) {
				log.innerHTML = log.innerHTML+"notification:"+data.message;
				// data.message,
				// data.title,
				// data.count,
				// data.sound,
				// data.image,
				// data.additionalData
			});

			push.on('error', function(e) {
				log.innerHTML = log.innerHTML+"error:"+e.message;
				// e.message
			});
		}
		function goToUrl(){
			var  networkConnectionType =  navigator.network.connection.type;
		//	alert('Connection Type: ' +  networkConnectionType );
			if(networkConnectionType=='none'){
				var element = document.getElementById('message');
			//	element.setAttribute('href','#');
				element.innerHTML = 'Please connect to your internet connection and try again!';
			}
			else{
				window.open('http://www.skilladda.com','_blank','location=no','hidden=yes','clearsessioncache=yes','toolbar=no','clearcache=yes','fullscreen=yes','hardwareback=no');
			}
		}
	</script>			
</body>
</html>
