<!doctype html>

<html lang="en">
<head>
<!--	<meta http-equiv="refresh" content="0; url=http://skilladda.com" />	-->
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/index.js"></script>
	<script type="text/javascript" src="js/push.js"></script>
</head>
<body>
	<div id="html">
		<div id="loading">
			<img id="loading-image" src="skilladda_logo_black.png" alt="SkillAdda" />
			<div class="error_msg" id="message"></div><br><br>
		</div>	
	</div>
	<script type="text/javascript">
		document.addEventListener("deviceready", onDeviceReady, false);

		// device APIs are available
		function initialize() { 
        this.bindEvents(); 
		}, 

		function bindEvents() { 
			document.addEventListener('deviceready', this.onDeviceReady, false); 
		},
		function onDeviceReady() {
		alert(PushNotification.getDeviceUniqueIdentifier());
			/*var phoneModel = device.uuid;
			var phoneVersion = device.version;
			alert(phoneModel+'||'+phoneVersion);*/
			var  networkConnectionType =  navigator.network.connection.type;
         //   alert('Connection Type: ' +  networkConnectionType );
			var element = document.getElementById('message');
			var log = document.getElementById('log_msg');
			element.innerHTML = '';
			if(networkConnectionType=='none'){
				element.innerHTML = 'Please connect to your internet connection and try again!';
			}
			else{
				element.innerHTML = '<a target="_blank" onClick=goToUrl();>Go to test-SkillAdda</a>';
			}
		}
		/*function receivedEvent(id) { 
			var parentElement = document.getElementById(id); 
			var listeningElement = parentElement.querySelector('.listening'); 
			var receivedElement = parentElement.querySelector('.received'); 

			listeningElement.setAttribute('style', 'display:none;'); 
			receivedElement.setAttribute('style', 'display:block;'); 

			console.log('Received Event: ' + id); 
			var pushNotification = window.plugins.pushNotification; 
				alert("Register called"); 
				pushNotification.register(this.successHandler, this.errorHandler,{"senderID":"50957485970","ecb":"app.onNotificationGCM"}); 
		}
		function successHandler(result) { 
			alert('Callback Success! Result = '+result) 
		}
		function errorHandler(error) { 
			alert(error); 
		}
		function onNotificationGCM(e) { 
			switch( e.event ) 
			{ 
				case 'registered': 
					if ( e.regid.length > 0 ) 
					{ 
						console.log("Regid " + e.regid); 
						alert('registration id = '+e.regid); 
						document.getElementById('regId').value = e.regid; 
					} 
				break; 

				case 'message': 
				  alert('message = '+e.message+' msgcnt = '+e.msgcnt); 
				break; 

				case 'error': 
				  alert('GCM error = '+e.msg); 
				break; 

				default: 
				  alert('An unknown GCM event has occurred'); 
				  break; 
			} 
		}
		function onNotificationAPN(event) { 
			var pushNotification = window.plugins.pushNotification; 
			alert("Running in JS - onNotificationAPN - Received a notification! " + event.alert); 

			if (event.alert) { 
				navigator.notification.alert(event.alert); 
			} 
			if (event.badge) { 
				pushNotification.setApplicationIconBadgeNumber(this.successHandler, this.errorHandler, event.badge); 
			} 
			if (event.sound) { 
				var snd = new Media(event.sound); 
				snd.play(); 
			} 
		} */
		function goToUrl(){
			var  networkConnectionType =  navigator.network.connection.type;
		//	alert('Connection Type: ' +  networkConnectionType );
			if(networkConnectionType=='none'){
				var element = document.getElementById('message');
			//	element.setAttribute('href','#');
				element.innerHTML = 'Please connect to your internet connection and try again!';
				return false;
			}
			else{
				window.open('http://www.skilladda.com','_self','location=no','hidden=yes','clearsessioncache=yes','toolbar=no','clearcache=yes','fullscreen=yes','hardwareback=no');
				return false;
			}
		}
	</script>			
</body>
</html>
